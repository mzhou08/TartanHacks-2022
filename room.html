<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Dolby.io Web SDK Sample Application</title>

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.0/css/bootstrap.min.css"
        integrity="sha512-P5MgMn1jBN01asBgU0z60Qk4QxiXo86+wlFahKrsQf37c9cro517WzVSPPV1tDKzhku2iJ2FVgL67wG03SGnNA=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
        integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer" />

    <link rel="stylesheet"
        href="styles.css">

    <script type="text/javascript"
        src="https://unpkg.com/@voxeet/voxeet-web-sdk"></script>
</head>
<body>


    <main role="main">
        <div class="container">
            <h1 id="title" class="title">You are not connected to Dolby.io APIs</h1>
    
            <div class="form-group row">
                <label for="webrtc-constraints" class="col-sm-3 col-form-label">WebRTC video constraints:</label>
                <div class="col-sm-9">
                <div class="input-group input-group-sm">
                    <select id="webrtc-constraints" class="custom-select">
                        <option value="auto">Automatic Resolution</option>
                        <option value="640">Resolution 640 x 360</option>
                        <option value="960">Resolution 960 x 540</option>
                        <option value="1280">Resolution 1280 x 720</option>
                        <option value="min640">Minimum Resolution 640 x 360</option>
                        <option value="min960">Minimum Resolution 960 x 540</option>
                        <option value="min1280">Minimum Resolution 1280 x 720</option>
                    </select>
                    <div class="input-group-append">
                        <button id="btn-set-webrtc-constraints" class="btn btn-secondary" type="button" disabled>Set</button>
                    </div>
                  </div>
                </div>
            </div>

            <div class="form-group row">
                <label for="username-input" class="col-sm-3 col-form-label">About you:</label>
                <div class="col-sm-9">
                    <div class="input-group input-group-sm">
                        <input id="external-id-input" type="text" class="form-control" placeholder="External ID" title="External ID">
                        <input id="username-input" type="text" class="form-control" placeholder="Your name" title="Your name">
                        <input id="avatar-url-input" type="text" class="form-control" placeholder="Avatar URL" title="Avatar URL">
                        <div class="input-group-append">
                            <button id="connect-btn" class="btn btn-primary" type="button">Connect</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Join or Leave a Conference -->
            <div class="form-group row">
                <label for="conference-alias-input" class="col-sm-3 col-form-label">Conference alias:</label>
                <div class="col-sm-9">
                <div class="input-group input-group-sm">
                    <div class="input-group-prepend">
                        <div class="input-group-text">
                            <input id="chk-live-recording" type="checkbox">
                        </div>
                        <label class="input-group-text" for="chk-live-recording" style="border-left: none; padding-left: 0;">Live recording</label>
                    </div>
                    <div class="input-group-prepend">
                        <div class="input-group-text">
                            <input id="chk-dolby-voice" type="checkbox" checked>
                        </div>
                        <label class="input-group-text" for="chk-dolby-voice" style="border-left: none; padding-left: 0;">Dolby Voice</label>
                    </div>
                    <input id="conference-alias-input" type="text" class="form-control" placeholder="Conference alias">
                    <div class="input-group-append">
                        <button id="conference-join-btn" class="btn btn-primary" type="button" disabled>Join</button>
                        <button id="conference-listen-btn" class="btn btn-primary" type="button" disabled>Listen</button>
                        <button id="conference-leave-btn" class="btn btn-danger" type="button" disabled>Leave</button>
                    </div>
                  </div>
                </div>
            </div>
    
            <!-- Video Devices -->
            <div class="form-group row">
                <label for="video-devices" class="col-sm-3 col-form-label">Video Devices:</label>
                <div class="col-sm-9">
                <div class="input-group input-group-sm">
                    <select id="video-devices" class="custom-select"></select>
                    <div class="input-group-append">
                        <button id="btn-set-video-device" class="btn btn-info" type="button" disabled>Set</button>
                    </div>
                  </div>
                </div>
            </div>
    
            <!-- Input Audio Devices -->
            <div class="form-group row">
                <label for="input-audio-devices" class="col-sm-3 col-form-label">Input Audio Devices:</label>
                <div class="col-sm-9">
                <div class="input-group input-group-sm">
                    <select id="input-audio-devices" class="custom-select"></select>
                    <div class="input-group-append">
                        <button id="btn-set-input-audio-device" class="btn btn-info" type="button" disabled>Set</button>
                    </div>
                  </div>
                </div>
            </div>
    
            <!-- Output Audio Devices -->
            <div class="form-group row">
                <label for="output-audio-devices" class="col-sm-3 col-form-label">Output Audio Devices:</label>
                <div class="col-sm-9">
                    <div class="input-group input-group-sm">
                        <select id="output-audio-devices" class="custom-select"></select>
                        <div class="input-group-append">
                            <button id="btn-set-output-audio-device" class="btn btn-info" type="button" disabled>Set</button>
                        </div>
                      </div>
                </div>
            </div>

            <!-- Actions on Video -->
            <div class="form-group row" data-conference="on">
                <label class="col-sm-3 col-form-label">Video actions:</label>
                <div class="col-sm-9">
                    <div class="input-group input-group-sm">
                        <div class="input-group-append">
                            <button id="start-video-btn" class="btn btn-success" type="button" disabled>Start video</button>
                            <button id="stop-video-btn" class="btn btn-secondary" type="button" disabled>Stop video</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Actions on Audio -->
            <div class="form-group row" data-conference="on">
                <label class="col-sm-3 col-form-label">Audio actions:</label>
                <div class="col-sm-9">
                    <div class="input-group input-group-sm">
                        <div class="input-group-append">
                            <button id="start-audio-btn" class="btn btn-success" type="button" disabled>Start audio</button>
                            <button id="stop-audio-btn" class="btn btn-secondary" type="button" disabled>Stop audio</button>
                            <button id="mute-audio-btn" class="btn btn-warning" type="button" disabled>Mute audio</button>
                            <button id="unmute-audio-btn" class="btn btn-warning" type="button" disabled>Unmute audio</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Actions on Screen Share -->
            <div class="form-group row" data-conference="on">
                <label class="col-sm-3 col-form-label">Screen Share actions:</label>
                <div class="col-sm-9">
                    <div class="input-group input-group-sm">
                        <div class="input-group-append">
                            <button id="start-screenshare-btn" class="btn btn-success" type="button" disabled>Start screen share</button>
                            <button id="stop-screenshare-btn" class="btn btn-secondary" type="button" disabled>Stop screen share</button>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Play a video -->
            <div class="form-group row" data-conference="on">
                <label for="video-url-input" class="col-sm-3 col-form-label">Play Video URL:</label>
                <div class="col-sm-9">
                <div class="input-group input-group-sm">
                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="fas fa-info-circle gray fa-lg" title="The video URL must be publicly accessible"></i></span>
                    </div>
                    <input id="video-url-input" type="text" class="form-control" value="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4">
                    <div class="input-group-append">
                        <button id="video-start-btn" class="btn btn-primary" type="button" disabled>Start</button>
                        <button id="video-stop-btn" class="btn btn-danger" type="button" disabled>Stop</button>
                        <button id="video-pause-btn" class="btn btn-warning" type="button" disabled>Pause</button>
                        <button id="video-play-btn" class="btn btn-warning" type="button" disabled>Play</button>
                    </div>
                  </div>
                </div>
            </div>

            <!-- Recording Actions and Status -->
            <div class="form-group row" data-conference="on">
                <label class="col-sm-3 col-form-label">Recording:</label>
                <div class="col-sm-9">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend">
                            <span class="input-group-text"><i id="recording-status" class="fas fa-stop-circle gray fa-lg"></i></span>
                        </div>
                        <div class="input-group-append">
                            <button id="start-recording-btn" class="btn btn-primary" type="button" disabled>Start</button>
                            <button id="stop-recording-btn" class="btn btn-danger" type="button" disabled>Stop</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RTMP Streaming -->
            <div class="form-group row" data-conference="on">
                <label for="rtmp-url-input" class="col-sm-3 col-form-label">RTMP Stream URL:</label>
                <div class="col-sm-9">
                <div class="input-group input-group-sm">
                    <div class="input-group-prepend">
                      <span class="input-group-text"><i id="rtmp-status" class="fas fa-broadcast-tower gray"></i></span>
                    </div>
                    <input id="rtmp-url-input" type="text" class="form-control" value="rtmp://a.rtmp.youtube.com/live2/">
                    <div class="input-group-append">
                        <button id="start-rtmp-btn" class="btn btn-primary" type="button" disabled>Start</button>
                        <button id="stop-rtmp-btn" class="btn btn-danger" type="button" disabled>Stop</button>
                    </div>
                  </div>
                </div>
            </div>

            <!-- Messaging -->
            <div class="form-group row" data-conference="on">
                <label for="message-input" class="col-sm-3 col-form-label">Message:</label>
                <div class="col-sm-9">
                <div class="input-group input-group-sm">
                    <input id="message-input" type="text" class="form-control" value="Bonjour">
                    <div class="input-group-append">
                        <button id="send-message-btn" class="btn btn-primary" type="button" disabled>Send</button>
                    </div>
                  </div>
                </div>
            </div>

            <!-- Invitation -->
            <div class="form-group row" data-conference="on">
                <label for="message-input" class="col-sm-3 col-form-label">Invitation:</label>
                <div class="col-sm-9">
                <div class="input-group input-group-sm">
                    <input id="invite-input" type="text" class="form-control" placeholder="External ID">
                    <div class="input-group-append">
                        <button id="send-invitation-btn" class="btn btn-primary" type="button" disabled>Invite</button>
                    </div>
                  </div>
                </div>
            </div>

        </div>

        <!-- Display the list of participants -->
        <div class="bg-light">
            <div class="container">
                <h2 class="title">Participants</h2>
                <ul id="participants-list"></ul>
            </div>
        </div>

        <!-- Container for the video streams -->
        <div>
            <div class="container">
                <h2 class="title">Video Streams</h2>
                <div id="streams-containers" class="row"></div>
            </div>
        </div>

        <!-- Display logs -->
        <div class="bg-light">
            <div class="container">
                <h2 class="title">Logs</h2>
                <div class="form-group">
                    <textarea id="logs-area" class="form-control" rows="10" readonly></textarea>
                  </div>
            </div>
        </div>
    </main>

    <footer class="text-muted">
        <div class="container">
            <p class="float-right">
                <a href="#">Back to top</a>
            </p>
            <p>Powered by <a href="https://www.dolby.io">Dolby.io</a>. SDK Version <span id="sdk-version">0.0.0</span>. <a href="https://github.com/dolbyio-samples/dolbyio-web-sdk-sample" target="_blank">GitHub repo</a></p>
        </div>
    </footer>

    <script id="template-participant" type="text/x-jsrender">
        <li id="participant-{{:id}}">
            <img class="participant-avatar" src="{{:avatarUrl}}" />
            <span>{{:name}} - {{:status}}{{if isLocal}} - [local session]{{/if}}</span>
        </li>
    </script>

    <script id="template-video" type="text/x-jsrender">
        <div id="stream-{{:id}}" class="col-md-4">
            <div class="card mb-4 shadow-sm">
                <video width="150%" height="300" autoplay="autoplay" muted="true" playsinline="true"></video>
                <div class="card-body">
                    <p class="card-text">This is a video stream from {{:name}}.</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="btn-group">
                          </div>
                        <small class="text-muted resolution"></small>
                    </div>
                </div>
            </div>
        </div>
    </script>

    <script id="template-screenshare" type="text/x-jsrender">
        <div id="stream-screenshare" class="col-md-6">
            <div class="card mb-4 shadow-sm">
                <video width="100%" height="300" autoplay="autoplay" muted="true" playsinline="true"></video>
                <div class="card-body">
                    <p class="card-text">This is a screen share from {{:name}}.</p>
                </div>
            </div>
        </div>
    </script>

    <script id="template-video-url" type="text/x-jsrender">
        <div id="stream-video" class="col-md-6">
            <div class="card mb-4 shadow-sm">
                <video width="100%" height="300" autoplay="autoplay" playsinline="true" src="{{:url}}"></video>
            </div>
        </div>
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.0/js/bootstrap.bundle.min.js"
        integrity="sha512-wV7Yj1alIZDqZFCUQJy85VN+qvEIly93fIQAN7iqDFCPEucLCeNFz4r35FCo9s6WrpdDQPi80xbljXB8Bjtvcg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsrender/1.0.11/jsrender.min.js"
        integrity="sha512-bKlNlbTH3duwZ28zoqEhXui/yuaPuQVci6OAVu0zh2WfYbEKD39HszVR8byP4/L4YyBo3b5CGIY+4ldVN93uCg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"></script>
    <script type="text/javascript" src="script.js"></script>
    <script type="text/javascript" src="events.js"></script>
</body>
</html>
